(this["webpackJsonpthemed-demo-app"]=this["webpackJsonpthemed-demo-app"]||[]).push([[0],{306:function(e,t,n){e.exports=n(388)},336:function(e,t){},387:function(e,t,n){},388:function(e,t,n){"use strict";n.r(t);var a=n(45),r=n.n(a),o=n(76),c=n(0),l=n.n(c),i=n(53),u=n.n(i),V=n(54),m=n(12),d=n(28),s=n(41),f=n(271),b=n(14),p=n(4),g=n(262),E=n(265),h=n(123),A=n(270),v=n(75),O=n(264),S=n(79);S.ApiClient.instance.authentications.ApiKey.apiKey="api-87c1c819-b350-4968-8205-c858f0eaa39d",S.ApiClient.instance.defaultHeaders={};var j=new S.FeatureFlagsApi,x="production",y="leon-demo-project",F=[],T={getDemoThemeVariations:function(){return new Promise((function(e,t){F.length>0&&e(F),j.getFeatureFlag(y,"demoTheme",{env:x},(function(n,a,r){n&&(console.error("error fetching theme list",n),t()),F=a?a.variations:[],e(F)}))}))},updateDemoThemeFallthrough:function(e){return new Promise((function(t,n){var a=F.findIndex((function(t){return t.name==e}));a>-1&&j.patchFeatureFlag(y,"demoTheme",{patch:[{op:"replace",path:"/environments/".concat(x,"/fallthrough"),value:{variation:a}}]},(function(e,a,r){e&&(console.error("Error updating demoTheme flag fallthrough",e),n()),t()}))}))},getDemoSoundFlag:function(){return new Promise((function(e,t){j.getFeatureFlag(y,"demoSoundEnabled",{env:x},(function(n,a,r){n&&(console.error("error getting demoSoundEnabled flag",n),t()),e(a)}))}))},toggleDemoSoundFlag:function(e){return new Promise((function(t,n){T.patchFeatureFlag(y,"demoSoundEnabled",{patch:[{op:"replace",path:"/environments/".concat(x,"/on"),value:e}]},(function(e,a,r){e&&(console.error("Error toggling demoSoundEnabled flag",e),n()),t()}))}))},setSoundFlagSelectionTarget:function(e){return new Promise((function(t,n){j.patchFeatureFlag(y,"demoSoundEnabled",{patch:[{op:"replace",path:"/environments/".concat(x,"/rules/0/clauses/0/values"),value:[e]}]},(function(e,a,r){e&&(console.error("Error updating demoSoundEnabled flag card targeting",e),n()),t()}))}))},setSoundFlagSuitTarget:function(e){return new Promise((function(t,n){j.patchFeatureFlag(y,"demoSoundEnabled",{patch:[{op:"replace",path:"/environments/".concat(x,"/rules/1/clauses/0/values"),value:[e]}]},(function(e,a,r){e&&(console.error("Error updating demoSoundEnabled flag suit targeting",e),n()),t()}))}))}},C=T;function k(){var e,t,n=Object(c.useContext)(W),a=n.context,r=n.setContext,o=Object(b.c)(),i=o.isOpen,u=o.onOpen,V=o.onClose,s=Object(c.useState)(a.NOP),p=Object(d.a)(s,2),E=p[0],h=p[1],S=Object(c.useState)(a.NOP),j=Object(d.a)(S,2),x=j[0],y=j[1],F=Object(c.useRef)(),T=Object(c.useRef)([]),k=Object(c.useRef)([]);return Object(c.useEffect)((function(){C.getDemoThemeVariations().then((function(e){return k.current=e})),C.getDemoSoundFlag().then((function(e){return function(e){var t,n,a="production",r=e.environments[a].rules.find((function(e){return"Selection"==e.description})),o=e.environments[a].rules.find((function(e){return"Card"==e.description})),c=null===(t=r.clauses.find((function(e){return"selection"==e.attribute})))||void 0===t?void 0:t.values[0],l=null===(n=o.clauses.find((function(e){return"suit"==e.attribute})))||void 0===n?void 0:n.values[0];h(c),y(l)}(e)})),T.current=["DIAMONDS","CLUBS","SPADES","HEARTS"]}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(g.a,{ref:F,onClick:u},"Settings"),l.a.createElement(A.a,{isOpen:i,placement:"right",onClose:V,finalFocusRef:F},l.a.createElement(A.f,null),l.a.createElement(A.d,null,l.a.createElement(A.c,null),l.a.createElement(A.e,{borderBottomWidth:"1px"},"Settings"),l.a.createElement(A.b,null,(null===(e=a.items)||void 0===e?void 0:e.length)>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement(v.b,{fontWeight:"bold"},"Item Selection"),l.a.createElement(O.a,{onChange:function(e){var t=e.target.value,n=a.ldClient.getUser();a.ldClient.identify(Object(m.a)(Object(m.a)({},n),{},{custom:Object(m.a)(Object(m.a)({},n.custom),{},{selection:t})}));var o=t!=a.NOP?a.items.find((function(e){return e.name==t})):a.NOP;r((function(e){return Object(m.a)(Object(m.a)({},e),{},{selectedItem:o})}))},value:a.selectedItem.name},l.a.createElement("option",{value:a.NOP},"Select a ",a.itemType),a.items.map((function(e){return l.a.createElement("option",{key:e.name,value:e.name},e.name)})))),a.demoAdmin&&l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{mt:4,borderRadius:"md",borderWidth:1,p:3},l.a.createElement(v.b,{fontWeight:"bold",borderBottomWidth:1,pb:3},"Admin Settings"),l.a.createElement(f.g,{spacing:"24px"},k.current&&l.a.createElement(f.a,null,l.a.createElement(v.b,{fontWeight:"bold"},"App Theme"),l.a.createElement(O.a,{onChange:function(e){var t=e.target.value;C.setSoundFlagSelectionTarget(a.NOP).then(C.updateDemoThemeFallthrough(t)),r((function(e){return Object(m.a)(Object(m.a)({},e),{},{theme:t})}))},value:a.theme},k.current.map((function(e){return l.a.createElement("option",{key:e.name,value:e.name},e.name)})))),l.a.createElement(f.a,null,l.a.createElement(v.b,{fontWeight:"bold",borderBottomWidth:1,pb:3},"Targeting"),(null===(t=a.items)||void 0===t?void 0:t.length)>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement(v.b,{fontWeight:"bold",textTransform:"capitalize"},a.itemType),l.a.createElement(O.a,{mb:3,onChange:function(e){var t=e.target.value;h(t),C.setSoundFlagSelectionTarget(t)},value:E,borderBottomWidth:1},l.a.createElement("option",{value:a.NOP},"Select a ",a.itemType),a.items.map((function(e){return l.a.createElement("option",{key:e.name,value:e.name},e.name)})))),l.a.createElement(v.b,{fontWeight:"bold"},"Suit"),l.a.createElement(O.a,{mb:3,value:x,borderBottomWidth:1,onChange:function(e){var t=e.target.value;y(t),C.setSoundFlagSuitTarget(t)}},l.a.createElement("option",{value:a.NOP},"Select a suit"),T.current.map((function(e){return l.a.createElement("option",{key:e,value:e},e)})))))))))))}function I(e){var t=e.server?"Server Error: Too many cat pics":"Oh no! That feature! It's broken!";return l.a.createElement("div",{style:{position:"fixed",zIndex:"999",top:"0px",left:"0px",width:"100%",height:"100%",color:"#ffffff",backgroundColor:e.server?"#FF0000":"#0000AA",fontFamily:"'Courier New', 'Courier New', Monaco, monospace"}},l.a.createElement("div",{style:{position:"absolute",left:"50%",top:"50%",fontSize:"14px",margin:"0",transform:"translateX(-50%) translateY(-50%)",maxWidth:"420px"}},l.a.createElement("div",{style:{textAlign:"center",marginBottom:"10px"}},l.a.createElement("span",{style:{margin:"auto",fontWeight:"bolder",fontSize:"18px"}},t)),l.a.createElement("div",null,"A problem has been detected with this application and it  has been shut down to prevent damage to your device.",l.a.createElement("br",null),l.a.createElement("br",null),"If this is the first time you've seen this, consider yourself lucky.",l.a.createElement("br",null),l.a.createElement("br",null),"If problems continue, you need LaunchDarkly feature flagging in your application ASAP.",l.a.createElement("br",null),l.a.createElement("br",null),"Technical Information: ",l.a.createElement("br",null),"*** START: (0xRELEASFEATURESWITHFLAGS, 0xSEPARATEDEPLOYFROMRELEASE, 0xTESTINPRODUCTION)")))}function w(){var e,t,n=Object(b.c)(),a=n.isOpen,r=n.onOpen,o=n.onClose,i=Object(c.useContext)(W).context,u=Object(c.useState)(!1),V=Object(d.a)(u,2),m=V[0],s=V[1];function A(){s(i.demoBroken)}return Object(c.useEffect)((function(){!i.demoBroken&&m&&s(!1)}),[i.demoBroken]),l.a.createElement(l.a.Fragment,null,i.demoServerBroken&&l.a.createElement("div",null,l.a.createElement(I,{server:"true"})),m&&l.a.createElement("div",null,l.a.createElement(I,null)),l.a.createElement(p.d.header,{px:2,w:"full",textAlign:"center",justifyContent:"center"},l.a.createElement(f.c,{h:16,alignItems:"center",justifyContent:"space-between",textAlign:"center"},i.navLinks&&l.a.createElement(g.b,{size:"md",icon:a?l.a.createElement(h.a,null):l.a.createElement(h.b,null),"aria-label":"Open Menu",display:{md:"none"},onClick:a?o:r}),l.a.createElement(f.c,null,l.a.createElement(p.d.h1,{display:"flex",alignItems:"center",fontSize:"xl",fontWeight:"medium"},"LaunchDarkly")),l.a.createElement(f.d,{spacing:3,alignItems:"center",display:"flex"},l.a.createElement(f.d,{as:"nav",spacing:1,display:{base:"none",md:"flex"}},null===(e=i.navLinks)||void 0===e?void 0:e.map((function(e,t){return l.a.createElement(f.f,Object.assign({},0===t&&{onClick:A},{key:e,px:2,py:1,rounded:"md",_hover:{textDecoration:"none"},href:"#"}),e)}))),l.a.createElement(k,null),l.a.createElement(E.a,{htmlHeight:52,htmlWidth:38,src:i.avatar}))),a&&l.a.createElement(f.a,{pb:4,display:{md:"none"}},l.a.createElement(f.g,{as:"nav",spacing:4},null===(t=i.navLinks)||void 0===t?void 0:t.map((function(e,t){return l.a.createElement(f.f,Object.assign({},0===t&&{onClick:A},{key:e,px:2,py:1,rounded:"md",_hover:{textDecoration:"none"},href:"#"}),e)}))))))}var D=n(273),B=n.n(D);function R(){var e=Object(c.useContext)(W).context,t=Object(c.useState)(!1),n=Object(d.a)(t,2),a=n[0],r=n[1],o=Object(c.useRef)();return Object(c.useEffect)((function(){e.soundEnabled&&!o.current&&(o.current=new Audio,o.current.autoplay=!0,o.current.src="data:audio/mpeg;base64,SUQzBAAAAAABEVRYWFgAAAAtAAADY29tbWVudABCaWdTb3VuZEJhbmsuY29tIC8gTGFTb25vdGhlcXVlLm9yZwBURU5DAAAAHQAAA1N3aXRjaCBQbHVzIMKpIE5DSCBTb2Z0d2FyZQBUSVQyAAAABgAAAzIyMzUAVFNTRQAAAA8AAANMYXZmNTcuODMuMTAwAAAAAAAAAAAAAAD/80DEAAAAA0gAAAAATEFNRTMuMTAwVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQsRbAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQMSkAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",o.current.addEventListener("ended",(function(){o.current.currentTime=0,r(!1)})))}),[e.soundEnabled]),l.a.createElement(f.a,{textAlign:"center"},l.a.createElement(f.b,{bg:"brand.title_bg1",h:{base:"40px",md:"60px"}},l.a.createElement(p.d.h1,{fontWeight:"medium",color:"brand.title",fontSize:{base:30,md:50}},"Welcome to the ",e.soundEnabled)),l.a.createElement(f.c,{className:"heroSection",bgPosition:"center",bgRepeat:"no-repeat",bgSize:"cover",justify:"center",bgImage:e.heroImage,h:{base:"100px",md:"200px",lg:"300px"}},l.a.createElement(f.b,null,l.a.createElement(f.e,{className:"themeName",fontSize:{base:80,md:100,lg:180},letterSpacing:"tighter",fontWeight:{base:"bold",md:"extrabold "},fontStyle:"italic",color:"brand.title"},e.theme))),l.a.createElement(f.b,{bg:"brand.title_bg2",h:{base:"40px",md:"60px"},p:"6"},l.a.createElement(f.e,{fontSize:{base:30,md:50},color:"brand.title"},"Demo App!")),e.showQRCode&&l.a.createElement(f.b,{margin:3},l.a.createElement(B.a,{value:"https://cleon.github.io/themed-demo-app/"})),e.soundEnabled?l.a.createElement(f.a,{onClick:function(){if(e.soundEnabled){var t=e.selectedItem.sound?e.selectedItem.sound:e.clickSound;t.length>0&&4===o.current.readyState&&(a||(o.current.src=t,o.current.play(),r(!0)))}},cursor:"pointer"},l.a.createElement(f.b,null,l.a.createElement(E.a,{mt:3,height:"auto",p:0,mb:0,maxWidth:{base:"40%",md:"60%"},cursor:"pointer",src:e.selectedItem!=e.NOP?e.selectedItem.image:e.defaultItemImage})),l.a.createElement(f.b,null,l.a.createElement(p.d.span,{cursor:"pointer",lineHeight:1,fontSize:{base:20,md:30}},"Click Me!"))):l.a.createElement(f.b,null,l.a.createElement(E.a,{mt:3,height:"auto",p:0,mb:0,maxWidth:{base:"40%",md:"60%"},src:e.selectedItem!=e.NOP?e.selectedItem.image:e.defaultItemImage})))}n(387);var W=Object(c.createContext)();var P=Object(V.withLDConsumer)()((function(e){var t=e.ldClient,n=Object(V.useFlags)(),a=n.demoTheme,i=n.demoSoundEnabled,u=n.demoQRCode,b=n.demoAdmin,p=n.demoBroken,g=n.demoServerBroken,E=Object(c.useState)({}),h=Object(d.a)(E,2),A=h[0],v=h[1],O=Object(c.useState)(),S=Object(d.a)(O,2),j=S[0],x=S[1],y=Object(c.useRef)([]);function F(){return(F=Object(o.a)(r.a.mark((function e(n){var o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=y.current.find((function(e){return e.theme===n}))){e.next=9;break}return e.next=4,fetch("themes/".concat(a,"/theme.json"));case 4:return c=e.sent,e.next=7,c.json();case 7:o=e.sent,y.current.push(o);case 9:o=Object(m.a)(Object(m.a)({},o),{},{ldClient:t,avatar:t.getUser().avatar,soundEnabled:i,showQRCode:u,demoAdmin:b,selectedItem:"DEFAULT",NOP:"DEFAULT"}),x(Object(s.b)(o.themeStyle)),v((function(e){return Object(m.a)(Object(m.a)({},e),o)}));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(e){F.apply(this,arguments)}(a)}),[a]),Object(c.useEffect)((function(){v((function(e){return Object(m.a)(Object(m.a)({},e),{},{showQRCode:u})}))}),[u]),Object(c.useEffect)((function(){v((function(e){return Object(m.a)(Object(m.a)({},e),{},{soundEnabled:i})}))}),[i]),Object(c.useEffect)((function(){v((function(e){return Object(m.a)(Object(m.a)({},e),{},{demoAdmin:b})}))}),[b]),Object(c.useEffect)((function(){v((function(e){return Object(m.a)(Object(m.a)({},e),{},{demoBroken:p})}))}),[p]),Object(c.useEffect)((function(){v((function(e){return Object(m.a)(Object(m.a)({},e),{},{demoServerBroken:g})}))}),[g]),l.a.createElement(s.a,{theme:j},l.a.createElement(W.Provider,{value:{context:A,setContext:v}},l.a.createElement(f.c,{direction:"column",w:"100%",m:"0 auto"},l.a.createElement(w,null),l.a.createElement(R,null))))}));Object(o.a)(r.a.mark((function e(){var t,n,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://deckofcardsapi.com/api/deck/new/draw/?count=1");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,a=n.cards[0],e.next=9,Object(V.asyncWithLDProvider)({clientSideID:"60d1cf33e50e740da22ac527",reactOptions:{useCamelCaseFlagKeys:!1},user:{key:a.code,avatar:a.image,custom:{card:a.code,suit:a.suit,face:a.value}},flags:{demoTheme:"Default",demoSoundEnabled:!1,demoQRCode:!1,demoAdmin:!1,demoBroken:!1,demoServerBroken:!1}});case 9:o=e.sent,u.a.render(l.a.createElement(o,null,l.a.createElement(P,null)),document.getElementById("root"));case 11:case"end":return e.stop()}}),e)})))()}},[[306,1,2]]]);
//# sourceMappingURL=main.ae8d3ca5.chunk.js.map