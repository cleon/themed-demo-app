(this["webpackJsonpthemed-demo-app"]=this["webpackJsonpthemed-demo-app"]||[]).push([[0],{306:function(e,t,n){e.exports=n(388)},336:function(e,t){},387:function(e,t,n){},388:function(e,t,n){"use strict";n.r(t);var a=n(45),r=n.n(a),o=n(76),c=n(0),l=n.n(c),i=n(53),u=n.n(i),V=n(54),m=n(12),d=n(28),s=n(41),f=n(271),b=n(14),g=n(4),p=n(262),h=n(265),E=n(123),A=n(270),v=n(75),O=n(264),S=n(79);S.ApiClient.instance.authentications.ApiKey.apiKey="api-87c1c819-b350-4968-8205-c858f0eaa39d",S.ApiClient.instance.defaultHeaders={};var j=new S.FeatureFlagsApi,x="production",y="leon-demo-project",C=[],F={getDemoThemeVariations:function(){return new Promise((function(e,t){C.length>0&&e(C),j.getFeatureFlag(y,"demoTheme",{env:x},(function(n,a,r){n&&(console.error("error fetching theme list",n),t()),C=a?a.variations:[],e(C)}))}))},updateDemoThemeFallthrough:function(e){return new Promise((function(t,n){var a=C.findIndex((function(t){return t.name==e}));a>-1&&j.patchFeatureFlag(y,"demoTheme",{patch:[{op:"replace",path:"/environments/".concat(x,"/fallthrough"),value:{variation:a}}]},(function(e,a,r){e&&(console.error("Error updating demoTheme flag fallthrough",e),n()),t()}))}))},getDemoSoundFlag:function(){return new Promise((function(e,t){j.getFeatureFlag(y,"demoSoundEnabled",{env:x},(function(n,a,r){n&&(console.error("error getting demoSoundEnabled flag",n),t()),e(a)}))}))},toggleDemoSoundFlag:function(e){return new Promise((function(t,n){F.patchFeatureFlag(y,"demoSoundEnabled",{patch:[{op:"replace",path:"/environments/".concat(x,"/on"),value:e}]},(function(e,a,r){e&&(console.error("Error toggling demoSoundEnabled flag",e),n()),t()}))}))},setSoundFlagSelectionTarget:function(e){return new Promise((function(t,n){j.patchFeatureFlag(y,"demoSoundEnabled",{patch:[{op:"replace",path:"/environments/".concat(x,"/rules/0/clauses/0/values"),value:[e]}]},(function(e,a,r){e&&(console.error("Error updating demoSoundEnabled flag card targeting",e),n()),t()}))}))},setSoundFlagSuitTarget:function(e){return new Promise((function(t,n){j.patchFeatureFlag(y,"demoSoundEnabled",{patch:[{op:"replace",path:"/environments/".concat(x,"/rules/1/clauses/0/values"),value:[e]}]},(function(e,a,r){e&&(console.error("Error updating demoSoundEnabled flag suit targeting",e),n()),t()}))}))}},k=F;function T(){var e,t,n=Object(c.useContext)(W),a=n.context,r=n.setContext,o=Object(b.c)(),i=o.isOpen,u=o.onOpen,V=o.onClose,s=Object(c.useState)(a.NOP),g=Object(d.a)(s,2),h=g[0],E=g[1],S=Object(c.useState)(a.NOP),j=Object(d.a)(S,2),x=j[0],y=j[1],C=Object(c.useRef)(),F=(Object(c.useRef)([]),Object(c.useRef)([])),T=Object(c.useRef)([]);return Object(c.useEffect)((function(){k.getDemoThemeVariations().then((function(e){return T.current=e})),k.getDemoSoundFlag().then((function(e){return function(e){var t,n,a="production",r=e.environments[a].rules.find((function(e){return"Selection"==e.description})),o=e.environments[a].rules.find((function(e){return"Card"==e.description})),c=null===(t=r.clauses.find((function(e){return"selection"==e.attribute})))||void 0===t?void 0:t.values[0],l=null===(n=o.clauses.find((function(e){return"suit"==e.attribute})))||void 0===n?void 0:n.values[0];E(c),y(l)}(e)})),F.current=["DIAMONDS","CLUBS","SPADES","HEARTS"]}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{ref:C,onClick:u},"Settings"),l.a.createElement(A.a,{isOpen:i,placement:"right",onClose:V,finalFocusRef:C},l.a.createElement(A.f,null),l.a.createElement(A.d,null,l.a.createElement(A.c,null),l.a.createElement(A.e,{borderBottomWidth:"1px"},"Settings"),l.a.createElement(A.b,null,(null===(e=a.items)||void 0===e?void 0:e.length)>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement(v.b,{fontWeight:"bold"},"Item Selection"),l.a.createElement(O.a,{onChange:function(e){var t=e.target.value,n=a.ldClient.getUser();a.ldClient.identify(Object(m.a)(Object(m.a)({},n),{},{custom:Object(m.a)(Object(m.a)({},n.custom),{},{selection:t})})),r((function(e){return Object(m.a)(Object(m.a)({},e),{},{selectedItem:t})}))},value:a.selectedItem},l.a.createElement("option",{value:a.NOP},"Select a ",a.itemType),a.items.map((function(e){return l.a.createElement("option",{key:e.name,value:e.name},e.name)})))),a.demoAdmin&&l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{mt:4,borderRadius:"md",borderWidth:1,p:3},l.a.createElement(v.b,{fontWeight:"bold",borderBottomWidth:1,pb:3},"Admin Settings"),l.a.createElement(f.g,{spacing:"24px"},T.current&&l.a.createElement(f.a,null,l.a.createElement(v.b,{fontWeight:"bold"},"App Theme"),l.a.createElement(O.a,{onChange:function(e){var t=e.target.value;k.setSoundFlagSelectionTarget(a.NOP).then(k.updateDemoThemeFallthrough(t)),r((function(e){return Object(m.a)(Object(m.a)({},e),{},{theme:t})}))},value:a.theme},T.current.map((function(e){return l.a.createElement("option",{key:e.name,value:e.name},e.name)})))),l.a.createElement(f.a,null,l.a.createElement(v.b,{fontWeight:"bold",borderBottomWidth:1,pb:3},"Targeting"),(null===(t=a.items)||void 0===t?void 0:t.length)>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement(v.b,{fontWeight:"bold",textTransform:"capitalize"},a.itemType),l.a.createElement(O.a,{mb:3,onChange:function(e){var t=e.target.value;E(t),k.setSoundFlagSelectionTarget(t)},value:h,borderBottomWidth:1},l.a.createElement("option",{value:a.NOP},"Select a ",a.itemType),a.items.map((function(e){return l.a.createElement("option",{key:e.name,value:e.name},e.name)})))),l.a.createElement(v.b,{fontWeight:"bold"},"Suit"),l.a.createElement(O.a,{mb:3,value:x,borderBottomWidth:1,onChange:function(e){var t=e.target.value;y(t),k.setSoundFlagSuitTarget(t)}},l.a.createElement("option",{value:a.NOP},"Select a suit"),F.current.map((function(e){return l.a.createElement("option",{key:e,value:e},e)})))))))))))}function w(e){return l.a.createElement("div",{style:{position:"fixed",zIndex:"999",top:"0px",left:"0px",width:"100%",height:"100%",color:"#ffffff",backgroundColor:e.server?"#FF0000":"#0000AA",fontFamily:"'Courier New', 'Courier New', Monaco, monospace"}},l.a.createElement("div",{style:{position:"absolute",left:"50%",top:"50%",fontSize:"14px",margin:"0",transform:"translateX(-50%) translateY(-50%)",maxWidth:"420px"}},l.a.createElement("div",{style:{textAlign:"center",marginBottom:"10px"}},l.a.createElement("span",{style:{margin:"auto",fontWeight:"bolder",fontSize:"18px"}},"LaunchDarkly ",e.server?"Server":"Client"," Error")),l.a.createElement("div",null,"A problem has been detected with this application and it  has been shut down to prevent damage to your device.",l.a.createElement("br",null),l.a.createElement("br",null),"If this is the first time you've seen this, consider yourself lucky.",l.a.createElement("br",null),l.a.createElement("br",null),"If problems continue, you need LaunchDarkly feature flagging in your application ASAP.",l.a.createElement("br",null),l.a.createElement("br",null),"Technical Information: ",l.a.createElement("br",null),"*** STOP: (0xRELEASFEATURESWITHFLAGS, 0xSEPARATEDEPLOYFROMRELEASE)")))}function B(){var e,t,n=Object(b.c)(),a=n.isOpen,r=n.onOpen,o=n.onClose,i=Object(c.useContext)(W).context,u=Object(c.useState)(!1),V=Object(d.a)(u,2),m=V[0],s=V[1];function A(){s(i.demoBroken)}return Object(c.useEffect)((function(){!i.demoBroken&&m&&s(!1)}),[i.demoBroken]),l.a.createElement(l.a.Fragment,null,i.demoServerBroken&&l.a.createElement("div",null,l.a.createElement(w,{server:"true"})),m&&l.a.createElement("div",null,l.a.createElement(w,null)),l.a.createElement(g.d.header,{px:2,w:"full",textAlign:"center",justifyContent:"center"},l.a.createElement(f.c,{h:16,alignItems:"center",justifyContent:"space-between",textAlign:"center"},i.navLinks&&l.a.createElement(p.b,{size:"md",icon:a?l.a.createElement(E.a,null):l.a.createElement(E.b,null),"aria-label":"Open Menu",display:{md:"none"},onClick:a?o:r}),l.a.createElement(f.c,null,l.a.createElement(g.d.h1,{display:"flex",alignItems:"center",fontSize:"xl",fontWeight:"medium"},"LaunchDarkly")),l.a.createElement(f.d,{spacing:3,alignItems:"center",display:"flex"},l.a.createElement(f.d,{as:"nav",spacing:1,display:{base:"none",md:"flex"}},null===(e=i.navLinks)||void 0===e?void 0:e.map((function(e,t){return l.a.createElement(f.f,Object.assign({},0===t&&{onClick:A},{key:e,px:2,py:1,rounded:"md",_hover:{textDecoration:"none"},href:"#"}),e)}))),l.a.createElement(T,null),l.a.createElement(h.a,{htmlHeight:52,htmlWidth:38,src:i.avatar}))),a&&l.a.createElement(f.a,{pb:4,display:{md:"none"}},l.a.createElement(f.g,{as:"nav",spacing:4},null===(t=i.navLinks)||void 0===t?void 0:t.map((function(e,t){return l.a.createElement(f.f,Object.assign({},0===t&&{onClick:A},{key:e,px:2,py:1,rounded:"md",_hover:{textDecoration:"none"},href:"#"}),e)}))))))}var D=n(273),I=n.n(D);function R(){var e=Object(c.useContext)(W).context,t=Object(c.useState)(!1),n=Object(d.a)(t,2),a=n[0],r=n[1],o=Object(c.useRef)(),i=!0===e.soundEnabled&&e.clickSound.length>0;return Object(c.useEffect)((function(){i&&(o.current=new Audio,o.current.autoplay=!0,o.current.src="data:audio/mpeg;base64,SUQzBAAAAAABEVRYWFgAAAAtAAADY29tbWVudABCaWdTb3VuZEJhbmsuY29tIC8gTGFTb25vdGhlcXVlLm9yZwBURU5DAAAAHQAAA1N3aXRjaCBQbHVzIMKpIE5DSCBTb2Z0d2FyZQBUSVQyAAAABgAAAzIyMzUAVFNTRQAAAA8AAANMYXZmNTcuODMuMTAwAAAAAAAAAAAAAAD/80DEAAAAA0gAAAAATEFNRTMuMTAwVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQsRbAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQMSkAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",o.current.addEventListener("ended",(function(){o.current.currentTime=0,r(!1)})))}),[e.soundEnabled,e.clickSound]),l.a.createElement(f.a,{textAlign:"center"},l.a.createElement(f.b,{bg:"brand.title_bg1",h:{base:"40px",md:"60px"}},l.a.createElement(g.d.h1,{fontWeight:"medium",color:"brand.title",fontSize:{base:30,md:50}},"Welcome to the ",e.soundEnabled)),l.a.createElement(f.c,{className:"heroSection",bgPosition:"center",bgRepeat:"no-repeat",bgSize:"cover",justify:"center",bgImage:e.heroImage,h:{base:"100px",md:"200px",lg:"300px"}},l.a.createElement(f.b,null,l.a.createElement(f.e,{className:"themeName",fontSize:{base:80,md:100,lg:180},letterSpacing:"tighter",fontWeight:{base:"bold",md:"extrabold "},fontStyle:"italic",color:"brand.title"},e.theme))),l.a.createElement(f.b,{bg:"brand.title_bg2",h:{base:"40px",md:"60px"},p:"6"},l.a.createElement(f.e,{fontSize:{base:30,md:50},color:"brand.title"},"Demo App!")),e.showQRCode&&l.a.createElement(f.b,{margin:3},l.a.createElement(I.a,{value:"https://cleon.github.io/themed-demo-app/"})),i?l.a.createElement(f.a,{onClick:function(){i&&4===o.current.readyState&&(a||(o.current.src=e.clickSound,o.current.play(),r(!0)))},cursor:"pointer"},l.a.createElement(f.b,null,l.a.createElement(h.a,{mt:3,height:"auto",p:0,mb:0,maxWidth:{base:"40%",md:"60%"},cursor:"pointer",src:e.selectedItem!=e.NOP?e.items.find((function(t){return t.name===e.selectedItem})).image:e.defaultItemImage})),l.a.createElement(f.b,null,l.a.createElement(g.d.span,{cursor:"pointer",lineHeight:1,fontSize:{base:20,md:30}},"Click Me!"))):l.a.createElement(f.b,null,l.a.createElement(h.a,{mt:3,height:"auto",p:0,mb:0,maxWidth:{base:"40%",md:"60%"},src:e.selectedItem!=e.NOP?e.items.find((function(t){return t.name===e.selectedItem})).image:e.defaultItemImage})))}n(387);var W=Object(c.createContext)();var P=Object(V.withLDConsumer)()((function(e){var t=e.ldClient,n=Object(V.useFlags)(),a=n.demoTheme,i=n.demoSoundEnabled,u=n.demoQRCode,b=n.demoAdmin,g=n.demoBroken,p=n.demoServerBroken,h=Object(c.useState)({}),E=Object(d.a)(h,2),A=E[0],v=E[1],O=Object(c.useState)(),S=Object(d.a)(O,2),j=S[0],x=S[1],y=Object(c.useRef)([]);function C(){return(C=Object(o.a)(r.a.mark((function e(n){var o,c,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c=y.current.find((function(e){return e.theme===n})))){e.next=5;break}o=c,e.next=12;break;case 5:return e.next=7,fetch("themes/".concat(a,"/theme.json"));case 7:return l=e.sent,e.next=10,l.json();case 10:o=e.sent,y.current.push(o);case 12:o=Object(m.a)(Object(m.a)({},o),{},{ldClient:t,avatar:t.getUser().avatar,soundEnabled:i,showQRCode:u,demoAdmin:b,selectedItem:"DEFAULT",NOP:"DEFAULT"}),x(Object(s.b)(o.themeStyle)),v((function(e){return Object(m.a)(Object(m.a)({},e),o)}));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){console.log("demoTheme flag changed",a),function(e){C.apply(this,arguments)}(a)}),[a]),Object(c.useEffect)((function(){console.log("showQRCode flag changed",u),v((function(e){return Object(m.a)(Object(m.a)({},e),{},{showQRCode:u})}))}),[u]),Object(c.useEffect)((function(){console.log("demoSoundEnabled flag changed",i),v((function(e){return Object(m.a)(Object(m.a)({},e),{},{soundEnabled:i})}))}),[i]),Object(c.useEffect)((function(){console.log("demoadmin flag changed",b),v((function(e){return Object(m.a)(Object(m.a)({},e),{},{demoAdmin:b})}))}),[b]),Object(c.useEffect)((function(){console.log("demoBroken flag changed",g),v((function(e){return Object(m.a)(Object(m.a)({},e),{},{demoBroken:g})}))}),[g]),Object(c.useEffect)((function(){console.log("demoServerBroken flag changed",p),v((function(e){return Object(m.a)(Object(m.a)({},e),{},{demoServerBroken:p})}))}),[p]),l.a.createElement(s.a,{theme:j},l.a.createElement(W.Provider,{value:{context:A,setContext:v}},l.a.createElement(f.c,{direction:"column",w:"100%",m:"0 auto"},l.a.createElement(B,null),l.a.createElement(R,null))))}));Object(o.a)(r.a.mark((function e(){var t,n,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://deckofcardsapi.com/api/deck/new/draw/?count=1");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,a=n.cards[0],e.next=9,Object(V.asyncWithLDProvider)({clientSideID:"60d1cf33e50e740da22ac527",reactOptions:{useCamelCaseFlagKeys:!1},user:{key:a.code,avatar:a.image,custom:{card:a.code,suit:a.suit,face:a.value}},flags:{demoTheme:"Default",demoSoundEnabled:!1,demoQRCode:!1,demoAdmin:!1,demoBroken:!1,demoServerBroken:!1}});case 9:o=e.sent,u.a.render(l.a.createElement(o,null,l.a.createElement(P,null)),document.getElementById("root"));case 11:case"end":return e.stop()}}),e)})))()}},[[306,1,2]]]);
//# sourceMappingURL=main.19d43143.chunk.js.map