(this["webpackJsonpthemed-demo-app"]=this["webpackJsonpthemed-demo-app"]||[]).push([[0],{306:function(e,t,n){e.exports=n(388)},336:function(e,t){},387:function(e,t,n){},388:function(e,t,n){"use strict";n.r(t);var a=n(45),r=n.n(a),o=n(76),c=n(0),l=n.n(c),i=n(53),u=n.n(i),m=n(54),d=n(12),s=n(28),f=n(41),b=n(271),g=n(14),p=n(4),h=n(262),E=n(265),v=n(123),O=n(270),S=n(75),j=n(264),x=n(79);x.ApiClient.instance.authentications.ApiKey.apiKey="api-87c1c819-b350-4968-8205-c858f0eaa39d",x.ApiClient.instance.defaultHeaders={};var y=new x.FeatureFlagsApi,k="production",C="leon-demo-project",F=[],A={getDemoThemeVariations:function(){return new Promise((function(e,t){F.length>0&&e(F),y.getFeatureFlag(C,"demoTheme",{env:k},(function(n,a,r){n&&(console.error("error fetching theme list",n),t()),F=a?a.variations:[],e(F)}))}))},updateDemoThemeFallthrough:function(e){return new Promise((function(t,n){var a=F.findIndex((function(t){return t.name==e}));a>-1&&y.patchFeatureFlag(C,"demoTheme",{patch:[{op:"replace",path:"/environments/".concat(k,"/fallthrough"),value:{variation:a}}]},(function(e,a,r){e&&(console.error("Error updating demoTheme flag fallthrough",e),n()),t()}))}))},getDemoSoundFlag:function(){return new Promise((function(e,t){y.getFeatureFlag(C,"demoSoundEnabled",{env:k},(function(n,a,r){n&&(console.error("error getting demoSoundEnabled flag",n),t()),e(a)}))}))},toggleDemoSoundFlag:function(e){return new Promise((function(t,n){A.patchFeatureFlag(C,"demoSoundEnabled",{patch:[{op:"replace",path:"/environments/".concat(k,"/on"),value:e}]},(function(e,a,r){e&&(console.error("Error toggling demoSoundEnabled flag",e),n()),t()}))}))},setSoundFlagSelectionTarget:function(e){return new Promise((function(t,n){y.patchFeatureFlag(C,"demoSoundEnabled",{patch:[{op:"replace",path:"/environments/".concat(k,"/rules/0/clauses/0/values"),value:[e]}]},(function(e,a,r){e&&(console.error("Error updating demoSoundEnabled flag card targeting",e),n()),t()}))}))},setSoundFlagSuitTarget:function(e){return new Promise((function(t,n){y.patchFeatureFlag(C,"demoSoundEnabled",{patch:[{op:"replace",path:"/environments/".concat(k,"/rules/1/clauses/0/values"),value:[e]}]},(function(e,a,r){e&&(console.error("Error updating demoSoundEnabled flag suit targeting",e),n()),t()}))}))}},w=A;function T(){var e,t,n=Object(c.useContext)(B),a=n.context,r=n.setContext,o=Object(g.c)(),i=o.isOpen,u=o.onOpen,m=o.onClose,f=Object(c.useState)(a.NOP),p=Object(s.a)(f,2),E=p[0],v=p[1],x=Object(c.useState)(a.NOP),y=Object(s.a)(x,2),k=y[0],C=y[1],F=Object(c.useRef)(),A=(Object(c.useRef)([]),Object(c.useRef)([])),T=Object(c.useRef)([]);return Object(c.useEffect)((function(){w.getDemoThemeVariations().then((function(e){return T.current=e})),w.getDemoSoundFlag().then((function(e){return function(e){var t,n,a="production",r=e.environments[a].rules.find((function(e){return"Selection"==e.description})),o=e.environments[a].rules.find((function(e){return"Card"==e.description})),c=null===(t=r.clauses.find((function(e){return"selection"==e.attribute})))||void 0===t?void 0:t.values[0],l=null===(n=o.clauses.find((function(e){return"suit"==e.attribute})))||void 0===n?void 0:n.values[0];v(c),C(l)}(e)})),A.current=["DIAMONDS","CLUBS","SPADES","HEARTS"]}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(h.a,{ref:F,onClick:u},"Settings"),l.a.createElement(O.a,{isOpen:i,placement:"right",onClose:m,finalFocusRef:F},l.a.createElement(O.f,null),l.a.createElement(O.d,null,l.a.createElement(O.c,null),l.a.createElement(O.e,{borderBottomWidth:"1px"},"Settings"),l.a.createElement(O.b,null,(null===(e=a.items)||void 0===e?void 0:e.length)>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement(S.b,{fontWeight:"bold"},"Item Selection"),l.a.createElement(j.a,{onChange:function(e){var t=e.target.value,n=a.ldClient.getUser();a.ldClient.identify(Object(d.a)(Object(d.a)({},n),{},{custom:Object(d.a)(Object(d.a)({},n.custom),{},{selection:t})})),r((function(e){return Object(d.a)(Object(d.a)({},e),{},{selectedItem:t})}))},value:a.selectedItem},l.a.createElement("option",{value:a.NOP},"Select a ",a.itemType),a.items.map((function(e){return l.a.createElement("option",{key:e.name,value:e.name},e.name)})))),a.demoAdmin&&l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,{mt:4,borderRadius:"md",borderWidth:1,p:3},l.a.createElement(S.b,{fontWeight:"bold",borderBottomWidth:1,pb:3},"Admin Settings"),l.a.createElement(b.g,{spacing:"24px"},T.current&&l.a.createElement(b.a,null,l.a.createElement(S.b,{fontWeight:"bold"},"App Theme"),l.a.createElement(j.a,{onChange:function(e){var t=e.target.value;w.setSoundFlagSelectionTarget(a.NOP).then(w.updateDemoThemeFallthrough(t)),r((function(e){return Object(d.a)(Object(d.a)({},e),{},{theme:t})}))},value:a.theme},T.current.map((function(e){return l.a.createElement("option",{key:e.name,value:e.name},e.name)})))),l.a.createElement(b.a,null,l.a.createElement(S.b,{fontWeight:"bold",borderBottomWidth:1,pb:3},"Targeting"),(null===(t=a.items)||void 0===t?void 0:t.length)>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement(S.b,{fontWeight:"bold",textTransform:"capitalize"},a.itemType),l.a.createElement(j.a,{mb:3,onChange:function(e){var t=e.target.value;v(t),w.setSoundFlagSelectionTarget(t)},value:E,borderBottomWidth:1},l.a.createElement("option",{value:a.NOP},"Select a ",a.itemType),a.items.map((function(e){return l.a.createElement("option",{key:e.name,value:e.name},e.name)})))),l.a.createElement(S.b,{fontWeight:"bold"},"Suit"),l.a.createElement(j.a,{mb:3,value:k,borderBottomWidth:1,onChange:function(e){var t=e.target.value;C(t),w.setSoundFlagSuitTarget(t)}},l.a.createElement("option",{value:a.NOP},"Select a suit"),A.current.map((function(e){return l.a.createElement("option",{key:e,value:e},e)})))))))))))}function D(e){return l.a.createElement("div",{style:{position:"fixed",zIndex:"999",top:"0px",left:"0px",width:"100%",height:"100%",color:"#ffffff",backgroundColor:e.server?"#FF0000":"#0000AA",fontFamily:"'Courier New', 'Courier New', Monaco, monospace"}},l.a.createElement("div",{style:{position:"absolute",left:"50%",top:"50%",fontSize:"14px",margin:"0",transform:"translateX(-50%) translateY(-50%)",maxWidth:"420px"}},l.a.createElement("div",{style:{textAlign:"center",marginBottom:"10px"}},l.a.createElement("span",{style:{margin:"auto",fontWeight:"bolder",fontSize:"18px"}},"LaunchDarkly ",e.server?"Server":"Client"," Error")),l.a.createElement("div",null,"A problem has been detected with this application and it  has been shut down to prevent damage to your device.",l.a.createElement("br",null),l.a.createElement("br",null),"If this is the first time you've seen this, consider yourself lucky.",l.a.createElement("br",null),l.a.createElement("br",null),"If problems continue, you need LaunchDarkly feature flagging in your application ASAP.",l.a.createElement("br",null),l.a.createElement("br",null),"Technical Information: ",l.a.createElement("br",null),"*** STOP: (0xRELEASFEATURESWITHFLAGS, 0xSEPARATEDEPLOYFROMRELEASE)")))}function I(){var e,t,n=Object(g.c)(),a=n.isOpen,r=n.onOpen,o=n.onClose,i=Object(c.useContext)(B).context,u=Object(c.useState)(!1),m=Object(s.a)(u,2),d=m[0],f=m[1];function O(){f(i.demoBroken)}return Object(c.useEffect)((function(){!i.demoBroken&&d&&f(!1)}),[i.demoBroken]),l.a.createElement(l.a.Fragment,null,i.demoServerBroken&&l.a.createElement("div",null,l.a.createElement(D,{server:"true"})),d&&l.a.createElement("div",null,l.a.createElement(D,null)),l.a.createElement(p.d.header,{px:2,w:"full",textAlign:"center",justifyContent:"center"},l.a.createElement(b.c,{h:16,alignItems:"center",justifyContent:"space-between",textAlign:"center"},i.navLinks&&l.a.createElement(h.b,{size:"md",icon:a?l.a.createElement(v.a,null):l.a.createElement(v.b,null),"aria-label":"Open Menu",display:{md:"none"},onClick:a?o:r}),l.a.createElement(b.c,null,l.a.createElement(p.d.h1,{display:"flex",alignItems:"center",fontSize:"xl",fontWeight:"medium"},"LaunchDarkly")),l.a.createElement(b.d,{spacing:3,alignItems:"center",display:"flex"},l.a.createElement(b.d,{as:"nav",spacing:1,display:{base:"none",md:"flex"}},null===(e=i.navLinks)||void 0===e?void 0:e.map((function(e,t){return l.a.createElement(b.f,Object.assign({},0===t&&{onClick:O},{key:e,px:2,py:1,rounded:"md",_hover:{textDecoration:"none"},href:"#"}),e)}))),l.a.createElement(T,null),l.a.createElement(E.a,{htmlHeight:52,htmlWidth:38,src:i.avatar}))),a&&l.a.createElement(b.a,{pb:4,display:{md:"none"}},l.a.createElement(b.g,{as:"nav",spacing:4},null===(t=i.navLinks)||void 0===t?void 0:t.map((function(e,t){return l.a.createElement(b.f,Object.assign({},0===t&&{onClick:O},{key:e,px:2,py:1,rounded:"md",_hover:{textDecoration:"none"},href:"#"}),e)}))))))}var P=n(273),W=n.n(P);function R(){var e=Object(c.useContext)(B).context,t=Object(c.useState)(!1),n=Object(s.a)(t,2),a=n[0],r=n[1],o=Object(c.useRef)(new Audio),i=!0===e.soundEnabled&&e.clickSound.length>0;return Object(c.useEffect)((function(){i&&(o.current=new Audio(e.clickSound),o.current.addEventListener("ended",(function(){o.current.currentTime=0,r(!1)})))}),[e.soundEnabled,e.clickSound]),l.a.createElement(b.a,{textAlign:"center"},l.a.createElement(b.b,{bg:"brand.title_bg1",h:{base:"40px",md:"60px"}},l.a.createElement(p.d.h1,{fontWeight:"medium",color:"brand.title",fontSize:{base:30,md:50}},"Welcome to the ",e.soundEnabled)),l.a.createElement(b.c,{className:"heroSection",bgPosition:"center",bgRepeat:"no-repeat",bgSize:"cover",justify:"center",bgImage:e.heroImage,h:{base:"100px",md:"200px",lg:"300px"}},l.a.createElement(b.b,null,l.a.createElement(b.e,{className:"themeName",fontSize:{base:80,md:100,lg:180},letterSpacing:"tighter",fontWeight:{base:"bold",md:"extrabold "},fontStyle:"italic",color:"brand.title"},e.theme))),l.a.createElement(b.b,{bg:"brand.title_bg2",h:{base:"40px",md:"60px"},p:"6"},l.a.createElement(b.e,{fontSize:{base:30,md:50},color:"brand.title"},"Demo App!")),e.showQRCode&&l.a.createElement(b.b,{margin:3},l.a.createElement(W.a,{value:"https://cleon.github.io/themed-demo-app/"})),l.a.createElement(b.b,null,l.a.createElement(E.a,Object.assign({mt:3,height:"auto",p:0,mb:0,maxWidth:{base:"40%",md:"60%"},src:e.selectedItem!=e.NOP?e.items.find((function(t){return t.name===e.selectedItem})).image:e.defaultItemImage},i&&{onClick:function(){i&&4===o.current.readyState&&(a||(o.current.play(),r(!0)))},cursor:"pointer"}))),i&&l.a.createElement(b.b,null,l.a.createElement(p.d.span,{lineHeight:1,fontSize:{base:20,md:30}},"Click me!")))}n(387);var B=Object(c.createContext)();var L=Object(m.withLDConsumer)()((function(e){var t=e.ldClient,n=Object(m.useFlags)(),a=n.demoTheme,i=n.demoSoundEnabled,u=n.demoQRCode,g=n.demoAdmin,p=n.demoBroken,h=n.demoServerBroken,E=Object(c.useState)({}),v=Object(s.a)(E,2),O=v[0],S=v[1],j=Object(c.useState)(),x=Object(s.a)(j,2),y=x[0],k=x[1],C=Object(c.useRef)([]);function F(){return(F=Object(o.a)(r.a.mark((function e(n){var o,c,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c=C.current.find((function(e){return e.theme===n})))){e.next=5;break}o=c,e.next=12;break;case 5:return e.next=7,fetch("themes/".concat(a,"/theme.json"));case 7:return l=e.sent,e.next=10,l.json();case 10:o=e.sent,C.current.push(o);case 12:o=Object(d.a)(Object(d.a)({},o),{},{ldClient:t,avatar:t.getUser().avatar,soundEnabled:i,showQRCode:u,demoAdmin:g,selectedItem:"DEFAULT",NOP:"DEFAULT"}),k(Object(f.b)(o.themeStyle)),S((function(e){return Object(d.a)(Object(d.a)({},e),o)}));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){console.log("demoTheme flag changed",a),function(e){F.apply(this,arguments)}(a)}),[a]),Object(c.useEffect)((function(){console.log("showQRCode flag changed",u),S((function(e){return Object(d.a)(Object(d.a)({},e),{},{showQRCode:u})}))}),[u]),Object(c.useEffect)((function(){console.log("demoSoundEnabled flag changed",i),S((function(e){return Object(d.a)(Object(d.a)({},e),{},{soundEnabled:i})}))}),[i]),Object(c.useEffect)((function(){console.log("demoadmin flag changed",g),S((function(e){return Object(d.a)(Object(d.a)({},e),{},{demoAdmin:g})}))}),[g]),Object(c.useEffect)((function(){console.log("demoBroken flag changed",p),S((function(e){return Object(d.a)(Object(d.a)({},e),{},{demoBroken:p})}))}),[p]),Object(c.useEffect)((function(){console.log("demoServerBroken flag changed",h),S((function(e){return Object(d.a)(Object(d.a)({},e),{},{demoServerBroken:h})}))}),[h]),l.a.createElement(f.a,{theme:y},l.a.createElement(B.Provider,{value:{context:O,setContext:S}},l.a.createElement(b.c,{direction:"column",w:"100%",m:"0 auto"},l.a.createElement(I,null),l.a.createElement(R,null))))}));Object(o.a)(r.a.mark((function e(){var t,n,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://deckofcardsapi.com/api/deck/new/draw/?count=1");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,a=n.cards[0],e.next=9,Object(m.asyncWithLDProvider)({clientSideID:"60d1cf33e50e740da22ac527",reactOptions:{useCamelCaseFlagKeys:!1},user:{key:a.code,avatar:a.image,custom:{card:a.code,suit:a.suit,face:a.value}},flags:{demoTheme:"Default",demoSoundEnabled:!1,demoQRCode:!1,demoAdmin:!1,demoBroken:!1,demoServerBroken:!1}});case 9:o=e.sent,u.a.render(l.a.createElement(o,null,l.a.createElement(L,null)),document.getElementById("root"));case 11:case"end":return e.stop()}}),e)})))()}},[[306,1,2]]]);
//# sourceMappingURL=main.ba1fa6b6.chunk.js.map